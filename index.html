<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RoadScore</title>

    <!--Leafet-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>

    <!-- Make sure you put this AFTER Leaflet's CSS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
</head>
<body>
    <header>
        <h1>RoadScore</h1>
        <p>Rate the quality of the road.</p>
        <hr>
    </header>
    <h3>1. Report Details</h3>
        
        <label>Rating:</label><br>
        <select id="category" required>
            <option value="">-- Select Rating --</option>
            <option value="0">0 - Unusable</option>
            <option value="1">⭐ - Very Poor</option>
            <option value="2">⭐⭐ - Poor</option>
            <option value="3">⭐⭐⭐ - Average</option>
            <option value="4">⭐⭐⭐⭐ - Good</option>
            <option value="5">⭐⭐⭐⭐⭐ - Excellent</option>
        </select>
        
        <label>Description:</label><br>
        <textarea id="description" rows="3" style="width: 100%;" placeholder="What is wrong with the road?"></textarea>
        <br><br>

        <h3>2. Pin Location (Click the map)</h3>
        <p><i>Tip: Use the layers icon in the top-right of the map to filter by rating!</i></p>
        <div id="map" style="height: 500px; width: 1000px;"></div>

        <button type="submit" id="submit-btn" disabled>Submit Report</button>
        <span id="status-msg" style="color: red; margin-left: 10px;"></span>

        <h3>Recent Reports</h3>
        <div id="reports-list">
        <p>No reports yet.</p>
        </div>

    <main>
        
        <script>
            var map;
            var tempMarker = null;
            var selectedLat = null;
            var selectedLng = null;

        var streetLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19, attribution: '© OpenStreetMap'
        });
        var satelliteLayer = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
            maxZoom: 19, attribution: 'Tiles © Esri'
        });
        var layer0 = L.layerGroup();
        var layer1 = L.layerGroup();
        var layer2 = L.layerGroup();
        var layer3 = L.layerGroup();
        var layer4 = L.layerGroup();
        var layer5 = L.layerGroup();

        var baseMaps = {
            "Street View": streetLayer,
            "Satellite View": satelliteLayer
        };

        var overlayMaps = {
            "0 - Unusable": layer0,
            "⭐ - Very Poor": layer1,
            "⭐⭐ - Poor": layer2,
            "⭐⭐⭐ - Average": layer3,
            "⭐⭐⭐⭐ - Good": layer4,
            "⭐⭐⭐⭐⭐ - Excellent": layer5
        };

        map = L.map('map', {
            center: [8.36, 124.86], // Manolo Fortich
            zoom: 13,
            layers: [streetLayer, layer0, layer1, layer2, layer3, layer4, layer5]
        });

        L.control.layers(baseMaps, overlayMaps).addTo(map);

        map.on('click', function(e) {
            selectedLat = e.latlng.lat;
            selectedLng = e.latlng.lng;

            if (tempMarker) {
                map.removeLayer(tempMarker);
            }

            tempMarker = L.marker([selectedLat, selectedLng]).addTo(map);
            tempMarker.bindPopup("Selected Location").openPopup();

            document.getElementById('submit-btn').disabled = false;
            document.getElementById('status-msg').innerText = "Location ready!";
            document.getElementById('status-msg').style.color = "green";
        });

        
    </script>
        
    </script>
</body>
</html>